[{"line":"1","token_name":"T_OPEN_TAG","text":"<?php\n"},{"line":"2","token_name":"T_DECLARE","text":"declare"},{"line":"2","token_name":"(","text":"("},{"line":"2","token_name":"T_STRING","text":"strict_types"},{"line":"2","token_name":"=","text":"="},{"line":"2","token_name":"T_LNUMBER","text":"1"},{"line":"2","token_name":")","text":")"},{"line":"2","token_name":";","text":";"},{"line":"2","token_name":"T_WHITESPACE","text":"\n\n"},{"line":"4","token_name":"T_CLASS","text":"class"},{"line":"4","token_name":"T_WHITESPACE","text":" "},{"line":"4","token_name":"T_STRING","text":"Product"},{"line":"4","token_name":"T_WHITESPACE","text":" "},{"line":"4","token_name":"{","text":"{"},{"line":"4","token_name":"T_WHITESPACE","text":"\n\n    "},{"line":"6","token_name":"T_COMMENT","text":"\/\/ подключение к базе данных и таблице 'products'"},{"line":"6","token_name":"T_WHITESPACE","text":"\n    "},{"line":"7","token_name":"T_PRIVATE","text":"private"},{"line":"7","token_name":"T_WHITESPACE","text":" "},{"line":"7","token_name":"T_STRING","text":"PDO"},{"line":"7","token_name":"T_WHITESPACE","text":" "},{"line":"7","token_name":"T_VARIABLE","text":"$conn"},{"line":"7","token_name":";","text":";"},{"line":"7","token_name":"T_WHITESPACE","text":"\n    "},{"line":"8","token_name":"T_PRIVATE","text":"private"},{"line":"8","token_name":"T_WHITESPACE","text":" "},{"line":"8","token_name":"T_STRING","text":"string"},{"line":"8","token_name":"T_WHITESPACE","text":" "},{"line":"8","token_name":"T_VARIABLE","text":"$table_name"},{"line":"8","token_name":"T_WHITESPACE","text":" "},{"line":"8","token_name":"=","text":"="},{"line":"8","token_name":"T_WHITESPACE","text":" "},{"line":"8","token_name":"T_CONSTANT_ENCAPSED_STRING","text":"\"products\""},{"line":"8","token_name":";","text":";"},{"line":"8","token_name":"T_WHITESPACE","text":"\n\n    "},{"line":"10","token_name":"T_COMMENT","text":"\/\/ свойства объекта"},{"line":"10","token_name":"T_WHITESPACE","text":"\n    "},{"line":"11","token_name":"T_PUBLIC","text":"public"},{"line":"11","token_name":"T_WHITESPACE","text":" "},{"line":"11","token_name":"T_STRING","text":"int"},{"line":"11","token_name":"T_WHITESPACE","text":" "},{"line":"11","token_name":"T_VARIABLE","text":"$id"},{"line":"11","token_name":";","text":";"},{"line":"11","token_name":"T_WHITESPACE","text":"\n    "},{"line":"12","token_name":"T_PUBLIC","text":"public"},{"line":"12","token_name":"T_WHITESPACE","text":" "},{"line":"12","token_name":"T_STRING","text":"string"},{"line":"12","token_name":"T_WHITESPACE","text":" "},{"line":"12","token_name":"T_VARIABLE","text":"$name"},{"line":"12","token_name":";","text":";"},{"line":"12","token_name":"T_WHITESPACE","text":"\n    "},{"line":"13","token_name":"T_PUBLIC","text":"public"},{"line":"13","token_name":"T_WHITESPACE","text":" "},{"line":"13","token_name":"T_STRING","text":"string"},{"line":"13","token_name":"T_WHITESPACE","text":" "},{"line":"13","token_name":"T_VARIABLE","text":"$description"},{"line":"13","token_name":";","text":";"},{"line":"13","token_name":"T_WHITESPACE","text":"\n    "},{"line":"14","token_name":"T_PUBLIC","text":"public"},{"line":"14","token_name":"T_WHITESPACE","text":" "},{"line":"14","token_name":"T_STRING","text":"int"},{"line":"14","token_name":"T_WHITESPACE","text":" "},{"line":"14","token_name":"T_VARIABLE","text":"$price"},{"line":"14","token_name":";","text":";"},{"line":"14","token_name":"T_WHITESPACE","text":"\n    "},{"line":"15","token_name":"T_PUBLIC","text":"public"},{"line":"15","token_name":"T_WHITESPACE","text":" "},{"line":"15","token_name":"T_STRING","text":"int"},{"line":"15","token_name":"T_WHITESPACE","text":" "},{"line":"15","token_name":"T_VARIABLE","text":"$category_id"},{"line":"15","token_name":";","text":";"},{"line":"15","token_name":"T_WHITESPACE","text":"\n    "},{"line":"16","token_name":"T_PUBLIC","text":"public"},{"line":"16","token_name":"T_WHITESPACE","text":" "},{"line":"16","token_name":"?","text":"?"},{"line":"16","token_name":"T_STRING","text":"string"},{"line":"16","token_name":"T_WHITESPACE","text":" "},{"line":"16","token_name":"T_VARIABLE","text":"$category_name"},{"line":"16","token_name":";","text":";"},{"line":"16","token_name":"T_WHITESPACE","text":"\n    "},{"line":"17","token_name":"T_PUBLIC","text":"public"},{"line":"17","token_name":"T_WHITESPACE","text":" "},{"line":"17","token_name":"T_STRING","text":"string"},{"line":"17","token_name":"T_WHITESPACE","text":" "},{"line":"17","token_name":"T_VARIABLE","text":"$created"},{"line":"17","token_name":";","text":";"},{"line":"17","token_name":"T_WHITESPACE","text":"\n\n    "},{"line":"19","token_name":"T_COMMENT","text":"\/\/ конструктор для соединения с базой данных"},{"line":"19","token_name":"T_WHITESPACE","text":"\n    "},{"line":"20","token_name":"T_FUNCTION","text":"function"},{"line":"20","token_name":"T_WHITESPACE","text":" "},{"line":"20","token_name":"T_STRING","text":"__construct"},{"line":"20","token_name":"(","text":"("},{"line":"20","token_name":"T_VARIABLE","text":"$db"},{"line":"20","token_name":")","text":")"},{"line":"20","token_name":"{","text":"{"},{"line":"20","token_name":"T_WHITESPACE","text":"\n        "},{"line":"21","token_name":"T_VARIABLE","text":"$this"},{"line":"21","token_name":"T_OBJECT_OPERATOR","text":"->"},{"line":"21","token_name":"T_STRING","text":"conn"},{"line":"21","token_name":"T_WHITESPACE","text":" "},{"line":"21","token_name":"=","text":"="},{"line":"21","token_name":"T_WHITESPACE","text":" "},{"line":"21","token_name":"T_VARIABLE","text":"$db"},{"line":"21","token_name":";","text":";"},{"line":"21","token_name":"T_WHITESPACE","text":"\n    "},{"line":"22","token_name":"}","text":"}"},{"line":"22","token_name":"T_WHITESPACE","text":"\n\n    "},{"line":"24","token_name":"T_FUNCTION","text":"function"},{"line":"24","token_name":"T_WHITESPACE","text":" "},{"line":"24","token_name":"T_STRING","text":"read"},{"line":"24","token_name":"(","text":"("},{"line":"24","token_name":")","text":")"},{"line":"24","token_name":"{","text":"{"},{"line":"24","token_name":"T_WHITESPACE","text":"\n\n        "},{"line":"26","token_name":"T_COMMENT","text":"\/\/ выбираем все записи"},{"line":"26","token_name":"T_WHITESPACE","text":"\n        "},{"line":"27","token_name":"T_VARIABLE","text":"$query"},{"line":"27","token_name":"T_WHITESPACE","text":" "},{"line":"27","token_name":"=","text":"="},{"line":"27","token_name":"T_WHITESPACE","text":" "},{"line":"27","token_name":"T_CONSTANT_ENCAPSED_STRING","text":"\"SELECT\n                c.name as category_name, p.id, p.name, p.description, p.price, p.category_id, p.created\n            FROM\n                \""},{"line":"30","token_name":"T_WHITESPACE","text":" "},{"line":"30","token_name":".","text":"."},{"line":"30","token_name":"T_WHITESPACE","text":" "},{"line":"30","token_name":"T_VARIABLE","text":"$this"},{"line":"30","token_name":"T_OBJECT_OPERATOR","text":"->"},{"line":"30","token_name":"T_STRING","text":"table_name"},{"line":"30","token_name":"T_WHITESPACE","text":" "},{"line":"30","token_name":".","text":"."},{"line":"30","token_name":"T_WHITESPACE","text":" "},{"line":"30","token_name":"T_CONSTANT_ENCAPSED_STRING","text":"\" p\n                LEFT JOIN\n                    categories c\n                        ON p.category_id = c.id\n            ORDER BY\n                p.created DESC\""},{"line":"35","token_name":";","text":";"},{"line":"35","token_name":"T_WHITESPACE","text":"\n\n        "},{"line":"37","token_name":"T_COMMENT","text":"\/\/ подготовка запроса"},{"line":"37","token_name":"T_WHITESPACE","text":"\n        "},{"line":"38","token_name":"T_VARIABLE","text":"$stmt"},{"line":"38","token_name":"T_WHITESPACE","text":" "},{"line":"38","token_name":"=","text":"="},{"line":"38","token_name":"T_WHITESPACE","text":" "},{"line":"38","token_name":"T_VARIABLE","text":"$this"},{"line":"38","token_name":"T_OBJECT_OPERATOR","text":"->"},{"line":"38","token_name":"T_STRING","text":"conn"},{"line":"38","token_name":"T_OBJECT_OPERATOR","text":"->"},{"line":"38","token_name":"T_STRING","text":"prepare"},{"line":"38","token_name":"(","text":"("},{"line":"38","token_name":"T_VARIABLE","text":"$query"},{"line":"38","token_name":")","text":")"},{"line":"38","token_name":";","text":";"},{"line":"38","token_name":"T_WHITESPACE","text":"\n\n        "},{"line":"40","token_name":"T_COMMENT","text":"\/\/ выполняем запрос"},{"line":"40","token_name":"T_WHITESPACE","text":"\n        "},{"line":"41","token_name":"T_VARIABLE","text":"$stmt"},{"line":"41","token_name":"T_OBJECT_OPERATOR","text":"->"},{"line":"41","token_name":"T_STRING","text":"execute"},{"line":"41","token_name":"(","text":"("},{"line":"41","token_name":")","text":")"},{"line":"41","token_name":";","text":";"},{"line":"41","token_name":"T_WHITESPACE","text":"\n\n        "},{"line":"43","token_name":"T_RETURN","text":"return"},{"line":"43","token_name":"T_WHITESPACE","text":" "},{"line":"43","token_name":"T_VARIABLE","text":"$stmt"},{"line":"43","token_name":";","text":";"},{"line":"43","token_name":"T_WHITESPACE","text":"\n    "},{"line":"44","token_name":"}","text":"}"},{"line":"44","token_name":"T_WHITESPACE","text":"\n    "},{"line":"45","token_name":"T_COMMENT","text":"\/\/ метод create - создание товаров"},{"line":"45","token_name":"T_WHITESPACE","text":"\n    "},{"line":"46","token_name":"T_FUNCTION","text":"function"},{"line":"46","token_name":"T_WHITESPACE","text":" "},{"line":"46","token_name":"T_STRING","text":"create"},{"line":"46","token_name":"(","text":"("},{"line":"46","token_name":")","text":")"},{"line":"46","token_name":"{","text":"{"},{"line":"46","token_name":"T_WHITESPACE","text":"\n\n        "},{"line":"48","token_name":"T_COMMENT","text":"\/\/ запрос для вставки (создания) записей"},{"line":"48","token_name":"T_WHITESPACE","text":"\n        "},{"line":"49","token_name":"T_VARIABLE","text":"$query"},{"line":"49","token_name":"T_WHITESPACE","text":" "},{"line":"49","token_name":"=","text":"="},{"line":"49","token_name":"T_WHITESPACE","text":" "},{"line":"49","token_name":"T_VARIABLE","text":"$query"},{"line":"49","token_name":"T_WHITESPACE","text":" "},{"line":"49","token_name":"=","text":"="},{"line":"49","token_name":"T_WHITESPACE","text":" "},{"line":"49","token_name":"T_CONSTANT_ENCAPSED_STRING","text":"\"INSERT INTO\n                \""},{"line":"50","token_name":"T_WHITESPACE","text":" "},{"line":"50","token_name":".","text":"."},{"line":"50","token_name":"T_WHITESPACE","text":" "},{"line":"50","token_name":"T_VARIABLE","text":"$this"},{"line":"50","token_name":"T_OBJECT_OPERATOR","text":"->"},{"line":"50","token_name":"T_STRING","text":"table_name"},{"line":"50","token_name":"T_WHITESPACE","text":" "},{"line":"50","token_name":".","text":"."},{"line":"50","token_name":"T_WHITESPACE","text":" "},{"line":"50","token_name":"T_CONSTANT_ENCAPSED_STRING","text":"\"\n            (name, price, description, category_id, created) VALUES\n                (:name, :price, :description, :category_id, :created)\""},{"line":"52","token_name":";","text":";"},{"line":"52","token_name":"T_WHITESPACE","text":"\n\n\n        "},{"line":"55","token_name":"T_COMMENT","text":"\/\/ подготовка запроса"},{"line":"55","token_name":"T_WHITESPACE","text":"\n        "},{"line":"56","token_name":"T_VARIABLE","text":"$stmt"},{"line":"56","token_name":"T_WHITESPACE","text":" "},{"line":"56","token_name":"=","text":"="},{"line":"56","token_name":"T_WHITESPACE","text":" "},{"line":"56","token_name":"T_VARIABLE","text":"$this"},{"line":"56","token_name":"T_OBJECT_OPERATOR","text":"->"},{"line":"56","token_name":"T_STRING","text":"conn"},{"line":"56","token_name":"T_OBJECT_OPERATOR","text":"->"},{"line":"56","token_name":"T_STRING","text":"prepare"},{"line":"56","token_name":"(","text":"("},{"line":"56","token_name":"T_VARIABLE","text":"$query"},{"line":"56","token_name":")","text":")"},{"line":"56","token_name":";","text":";"},{"line":"56","token_name":"T_WHITESPACE","text":"\n\n        "},{"line":"58","token_name":"T_COMMENT","text":"\/\/ очистка"},{"line":"58","token_name":"T_WHITESPACE","text":"\n        "},{"line":"59","token_name":"T_VARIABLE","text":"$this"},{"line":"59","token_name":"T_OBJECT_OPERATOR","text":"->"},{"line":"59","token_name":"T_STRING","text":"name"},{"line":"59","token_name":"=","text":"="},{"line":"59","token_name":"T_WHITESPACE","text":" "},{"line":"59","token_name":"T_STRING","text":"htmlspecialchars"},{"line":"59","token_name":"(","text":"("},{"line":"59","token_name":"T_STRING","text":"strip_tags"},{"line":"59","token_name":"(","text":"("},{"line":"59","token_name":"T_VARIABLE","text":"$this"},{"line":"59","token_name":"T_OBJECT_OPERATOR","text":"->"},{"line":"59","token_name":"T_STRING","text":"name"},{"line":"59","token_name":")","text":")"},{"line":"59","token_name":")","text":")"},{"line":"59","token_name":";","text":";"},{"line":"59","token_name":"T_WHITESPACE","text":"\n        "},{"line":"60","token_name":"T_VARIABLE","text":"$this"},{"line":"60","token_name":"T_OBJECT_OPERATOR","text":"->"},{"line":"60","token_name":"T_STRING","text":"price"},{"line":"60","token_name":"=","text":"="},{"line":"60","token_name":"T_WHITESPACE","text":" "},{"line":"60","token_name":"T_INT_CAST","text":"(int)"},{"line":"60","token_name":"T_STRING","text":"htmlspecialchars"},{"line":"60","token_name":"(","text":"("},{"line":"60","token_name":"T_STRING","text":"strip_tags"},{"line":"60","token_name":"(","text":"("},{"line":"60","token_name":"T_STRING_CAST","text":"(string)"},{"line":"60","token_name":"T_VARIABLE","text":"$this"},{"line":"60","token_name":"T_OBJECT_OPERATOR","text":"->"},{"line":"60","token_name":"T_STRING","text":"price"},{"line":"60","token_name":")","text":")"},{"line":"60","token_name":")","text":")"},{"line":"60","token_name":";","text":";"},{"line":"60","token_name":"T_WHITESPACE","text":"\n        "},{"line":"61","token_name":"T_VARIABLE","text":"$this"},{"line":"61","token_name":"T_OBJECT_OPERATOR","text":"->"},{"line":"61","token_name":"T_STRING","text":"description"},{"line":"61","token_name":"=","text":"="},{"line":"61","token_name":"T_STRING","text":"htmlspecialchars"},{"line":"61","token_name":"(","text":"("},{"line":"61","token_name":"T_STRING","text":"strip_tags"},{"line":"61","token_name":"(","text":"("},{"line":"61","token_name":"T_VARIABLE","text":"$this"},{"line":"61","token_name":"T_OBJECT_OPERATOR","text":"->"},{"line":"61","token_name":"T_STRING","text":"description"},{"line":"61","token_name":")","text":")"},{"line":"61","token_name":")","text":")"},{"line":"61","token_name":";","text":";"},{"line":"61","token_name":"T_WHITESPACE","text":"\n        "},{"line":"62","token_name":"T_VARIABLE","text":"$this"},{"line":"62","token_name":"T_OBJECT_OPERATOR","text":"->"},{"line":"62","token_name":"T_STRING","text":"category_id"},{"line":"62","token_name":"=","text":"="},{"line":"62","token_name":"T_INT_CAST","text":"(int)"},{"line":"62","token_name":"T_STRING","text":"htmlspecialchars"},{"line":"62","token_name":"(","text":"("},{"line":"62","token_name":"T_STRING","text":"strip_tags"},{"line":"62","token_name":"(","text":"("},{"line":"62","token_name":"T_STRING_CAST","text":"(string)"},{"line":"62","token_name":"T_VARIABLE","text":"$this"},{"line":"62","token_name":"T_OBJECT_OPERATOR","text":"->"},{"line":"62","token_name":"T_STRING","text":"category_id"},{"line":"62","token_name":")","text":")"},{"line":"62","token_name":")","text":")"},{"line":"62","token_name":";","text":";"},{"line":"62","token_name":"T_WHITESPACE","text":"\n        "},{"line":"63","token_name":"T_VARIABLE","text":"$this"},{"line":"63","token_name":"T_OBJECT_OPERATOR","text":"->"},{"line":"63","token_name":"T_STRING","text":"created"},{"line":"63","token_name":"=","text":"="},{"line":"63","token_name":"T_STRING","text":"htmlspecialchars"},{"line":"63","token_name":"(","text":"("},{"line":"63","token_name":"T_STRING","text":"strip_tags"},{"line":"63","token_name":"(","text":"("},{"line":"63","token_name":"T_VARIABLE","text":"$this"},{"line":"63","token_name":"T_OBJECT_OPERATOR","text":"->"},{"line":"63","token_name":"T_STRING","text":"created"},{"line":"63","token_name":")","text":")"},{"line":"63","token_name":")","text":")"},{"line":"63","token_name":";","text":";"},{"line":"63","token_name":"T_WHITESPACE","text":"\n\n        "},{"line":"65","token_name":"T_COMMENT","text":"\/\/ привязка значений"},{"line":"65","token_name":"T_WHITESPACE","text":"\n        "},{"line":"66","token_name":"T_VARIABLE","text":"$stmt"},{"line":"66","token_name":"T_OBJECT_OPERATOR","text":"->"},{"line":"66","token_name":"T_STRING","text":"bindParam"},{"line":"66","token_name":"(","text":"("},{"line":"66","token_name":"T_CONSTANT_ENCAPSED_STRING","text":"\":name\""},{"line":"66","token_name":",","text":","},{"line":"66","token_name":"T_WHITESPACE","text":" "},{"line":"66","token_name":"T_VARIABLE","text":"$this"},{"line":"66","token_name":"T_OBJECT_OPERATOR","text":"->"},{"line":"66","token_name":"T_STRING","text":"name"},{"line":"66","token_name":")","text":")"},{"line":"66","token_name":";","text":";"},{"line":"66","token_name":"T_WHITESPACE","text":"\n        "},{"line":"67","token_name":"T_VARIABLE","text":"$stmt"},{"line":"67","token_name":"T_OBJECT_OPERATOR","text":"->"},{"line":"67","token_name":"T_STRING","text":"bindParam"},{"line":"67","token_name":"(","text":"("},{"line":"67","token_name":"T_CONSTANT_ENCAPSED_STRING","text":"\":price\""},{"line":"67","token_name":",","text":","},{"line":"67","token_name":"T_WHITESPACE","text":" "},{"line":"67","token_name":"T_VARIABLE","text":"$this"},{"line":"67","token_name":"T_OBJECT_OPERATOR","text":"->"},{"line":"67","token_name":"T_STRING","text":"price"},{"line":"67","token_name":")","text":")"},{"line":"67","token_name":";","text":";"},{"line":"67","token_name":"T_WHITESPACE","text":"\n        "},{"line":"68","token_name":"T_VARIABLE","text":"$stmt"},{"line":"68","token_name":"T_OBJECT_OPERATOR","text":"->"},{"line":"68","token_name":"T_STRING","text":"bindParam"},{"line":"68","token_name":"(","text":"("},{"line":"68","token_name":"T_CONSTANT_ENCAPSED_STRING","text":"\":description\""},{"line":"68","token_name":",","text":","},{"line":"68","token_name":"T_WHITESPACE","text":" "},{"line":"68","token_name":"T_VARIABLE","text":"$this"},{"line":"68","token_name":"T_OBJECT_OPERATOR","text":"->"},{"line":"68","token_name":"T_STRING","text":"description"},{"line":"68","token_name":")","text":")"},{"line":"68","token_name":";","text":";"},{"line":"68","token_name":"T_WHITESPACE","text":"\n        "},{"line":"69","token_name":"T_VARIABLE","text":"$stmt"},{"line":"69","token_name":"T_OBJECT_OPERATOR","text":"->"},{"line":"69","token_name":"T_STRING","text":"bindParam"},{"line":"69","token_name":"(","text":"("},{"line":"69","token_name":"T_CONSTANT_ENCAPSED_STRING","text":"\":category_id\""},{"line":"69","token_name":",","text":","},{"line":"69","token_name":"T_WHITESPACE","text":" "},{"line":"69","token_name":"T_VARIABLE","text":"$this"},{"line":"69","token_name":"T_OBJECT_OPERATOR","text":"->"},{"line":"69","token_name":"T_STRING","text":"category_id"},{"line":"69","token_name":")","text":")"},{"line":"69","token_name":";","text":";"},{"line":"69","token_name":"T_WHITESPACE","text":"\n        "},{"line":"70","token_name":"T_VARIABLE","text":"$stmt"},{"line":"70","token_name":"T_OBJECT_OPERATOR","text":"->"},{"line":"70","token_name":"T_STRING","text":"bindParam"},{"line":"70","token_name":"(","text":"("},{"line":"70","token_name":"T_CONSTANT_ENCAPSED_STRING","text":"\":created\""},{"line":"70","token_name":",","text":","},{"line":"70","token_name":"T_WHITESPACE","text":" "},{"line":"70","token_name":"T_VARIABLE","text":"$this"},{"line":"70","token_name":"T_OBJECT_OPERATOR","text":"->"},{"line":"70","token_name":"T_STRING","text":"created"},{"line":"70","token_name":")","text":")"},{"line":"70","token_name":";","text":";"},{"line":"70","token_name":"T_WHITESPACE","text":"\n\n        "},{"line":"72","token_name":"T_COMMENT","text":"\/\/ выполняем запрос"},{"line":"72","token_name":"T_WHITESPACE","text":"\n        "},{"line":"73","token_name":"T_IF","text":"if"},{"line":"73","token_name":"T_WHITESPACE","text":" "},{"line":"73","token_name":"(","text":"("},{"line":"73","token_name":"T_VARIABLE","text":"$stmt"},{"line":"73","token_name":"T_OBJECT_OPERATOR","text":"->"},{"line":"73","token_name":"T_STRING","text":"execute"},{"line":"73","token_name":"(","text":"("},{"line":"73","token_name":")","text":")"},{"line":"73","token_name":")","text":")"},{"line":"73","token_name":"T_WHITESPACE","text":" "},{"line":"73","token_name":"{","text":"{"},{"line":"73","token_name":"T_WHITESPACE","text":"\n            "},{"line":"74","token_name":"T_RETURN","text":"return"},{"line":"74","token_name":"T_WHITESPACE","text":" "},{"line":"74","token_name":"T_STRING","text":"true"},{"line":"74","token_name":";","text":";"},{"line":"74","token_name":"T_WHITESPACE","text":"\n        "},{"line":"75","token_name":"}","text":"}"},{"line":"75","token_name":"T_WHITESPACE","text":"\n\n        "},{"line":"77","token_name":"T_RETURN","text":"return"},{"line":"77","token_name":"T_WHITESPACE","text":" "},{"line":"77","token_name":"T_STRING","text":"false"},{"line":"77","token_name":";","text":";"},{"line":"77","token_name":"T_WHITESPACE","text":"\n    "},{"line":"78","token_name":"}","text":"}"},{"line":"78","token_name":"T_WHITESPACE","text":"\n    "},{"line":"79","token_name":"T_FUNCTION","text":"function"},{"line":"79","token_name":"T_WHITESPACE","text":" "},{"line":"79","token_name":"T_STRING","text":"readOne"},{"line":"79","token_name":"(","text":"("},{"line":"79","token_name":")","text":")"},{"line":"79","token_name":"T_WHITESPACE","text":" "},{"line":"79","token_name":"{","text":"{"},{"line":"79","token_name":"T_WHITESPACE","text":"\n\n        "},{"line":"81","token_name":"T_COMMENT","text":"\/\/ запрос для чтения одной записи (товара)"},{"line":"81","token_name":"T_WHITESPACE","text":"\n        "},{"line":"82","token_name":"T_VARIABLE","text":"$query"},{"line":"82","token_name":"T_WHITESPACE","text":" "},{"line":"82","token_name":"=","text":"="},{"line":"82","token_name":"T_WHITESPACE","text":" "},{"line":"82","token_name":"T_CONSTANT_ENCAPSED_STRING","text":"\"SELECT\n                c.name as category_name, p.id, p.name, p.description, p.price, p.category_id, p.created\n            FROM\n                \""},{"line":"85","token_name":"T_WHITESPACE","text":" "},{"line":"85","token_name":".","text":"."},{"line":"85","token_name":"T_WHITESPACE","text":" "},{"line":"85","token_name":"T_VARIABLE","text":"$this"},{"line":"85","token_name":"T_OBJECT_OPERATOR","text":"->"},{"line":"85","token_name":"T_STRING","text":"table_name"},{"line":"85","token_name":"T_WHITESPACE","text":" "},{"line":"85","token_name":".","text":"."},{"line":"85","token_name":"T_WHITESPACE","text":" "},{"line":"85","token_name":"T_CONSTANT_ENCAPSED_STRING","text":"\" p\n                LEFT JOIN\n                    categories c\n                        ON p.category_id = c.id\n            WHERE\n                p.id = ?\n            LIMIT\n                1\""},{"line":"92","token_name":";","text":";"},{"line":"92","token_name":"T_WHITESPACE","text":"\n\n        "},{"line":"94","token_name":"T_COMMENT","text":"\/\/ подготовка запроса"},{"line":"94","token_name":"T_WHITESPACE","text":"\n        "},{"line":"95","token_name":"T_VARIABLE","text":"$stmt"},{"line":"95","token_name":"T_WHITESPACE","text":" "},{"line":"95","token_name":"=","text":"="},{"line":"95","token_name":"T_WHITESPACE","text":" "},{"line":"95","token_name":"T_VARIABLE","text":"$this"},{"line":"95","token_name":"T_OBJECT_OPERATOR","text":"->"},{"line":"95","token_name":"T_STRING","text":"conn"},{"line":"95","token_name":"T_OBJECT_OPERATOR","text":"->"},{"line":"95","token_name":"T_STRING","text":"prepare"},{"line":"95","token_name":"(","text":"("},{"line":"95","token_name":"T_WHITESPACE","text":" "},{"line":"95","token_name":"T_VARIABLE","text":"$query"},{"line":"95","token_name":"T_WHITESPACE","text":" "},{"line":"95","token_name":")","text":")"},{"line":"95","token_name":";","text":";"},{"line":"95","token_name":"T_WHITESPACE","text":"\n\n        "},{"line":"97","token_name":"T_COMMENT","text":"\/\/ привязываем id товара, который будет обновлен"},{"line":"97","token_name":"T_WHITESPACE","text":"\n        "},{"line":"98","token_name":"T_VARIABLE","text":"$stmt"},{"line":"98","token_name":"T_OBJECT_OPERATOR","text":"->"},{"line":"98","token_name":"T_STRING","text":"bindParam"},{"line":"98","token_name":"(","text":"("},{"line":"98","token_name":"T_LNUMBER","text":"1"},{"line":"98","token_name":",","text":","},{"line":"98","token_name":"T_WHITESPACE","text":" "},{"line":"98","token_name":"T_VARIABLE","text":"$this"},{"line":"98","token_name":"T_OBJECT_OPERATOR","text":"->"},{"line":"98","token_name":"T_STRING","text":"id"},{"line":"98","token_name":")","text":")"},{"line":"98","token_name":";","text":";"},{"line":"98","token_name":"T_WHITESPACE","text":"\n\n        "},{"line":"100","token_name":"T_COMMENT","text":"\/\/ выполняем запрос"},{"line":"100","token_name":"T_WHITESPACE","text":"\n        "},{"line":"101","token_name":"T_VARIABLE","text":"$stmt"},{"line":"101","token_name":"T_OBJECT_OPERATOR","text":"->"},{"line":"101","token_name":"T_STRING","text":"execute"},{"line":"101","token_name":"(","text":"("},{"line":"101","token_name":")","text":")"},{"line":"101","token_name":";","text":";"},{"line":"101","token_name":"T_WHITESPACE","text":"\n\n        "},{"line":"103","token_name":"T_COMMENT","text":"\/\/ получаем извлеченную строку"},{"line":"103","token_name":"T_WHITESPACE","text":"\n        "},{"line":"104","token_name":"T_VARIABLE","text":"$row"},{"line":"104","token_name":"T_WHITESPACE","text":" "},{"line":"104","token_name":"=","text":"="},{"line":"104","token_name":"T_WHITESPACE","text":" "},{"line":"104","token_name":"T_VARIABLE","text":"$stmt"},{"line":"104","token_name":"T_OBJECT_OPERATOR","text":"->"},{"line":"104","token_name":"T_STRING","text":"fetch"},{"line":"104","token_name":"(","text":"("},{"line":"104","token_name":"T_STRING","text":"PDO"},{"line":"104","token_name":"T_DOUBLE_COLON","text":"::"},{"line":"104","token_name":"T_STRING","text":"FETCH_ASSOC"},{"line":"104","token_name":")","text":")"},{"line":"104","token_name":";","text":";"},{"line":"104","token_name":"T_WHITESPACE","text":"\n\n        "},{"line":"106","token_name":"T_COMMENT","text":"\/\/ установим значения свойств объекта"},{"line":"106","token_name":"T_WHITESPACE","text":"\n        "},{"line":"107","token_name":"T_VARIABLE","text":"$this"},{"line":"107","token_name":"T_OBJECT_OPERATOR","text":"->"},{"line":"107","token_name":"T_STRING","text":"name"},{"line":"107","token_name":"T_WHITESPACE","text":" "},{"line":"107","token_name":"=","text":"="},{"line":"107","token_name":"T_WHITESPACE","text":" "},{"line":"107","token_name":"T_VARIABLE","text":"$row"},{"line":"107","token_name":"[","text":"["},{"line":"107","token_name":"T_CONSTANT_ENCAPSED_STRING","text":"'name'"},{"line":"107","token_name":"]","text":"]"},{"line":"107","token_name":";","text":";"},{"line":"107","token_name":"T_WHITESPACE","text":"\n        "},{"line":"108","token_name":"T_VARIABLE","text":"$this"},{"line":"108","token_name":"T_OBJECT_OPERATOR","text":"->"},{"line":"108","token_name":"T_STRING","text":"price"},{"line":"108","token_name":"T_WHITESPACE","text":" "},{"line":"108","token_name":"=","text":"="},{"line":"108","token_name":"T_WHITESPACE","text":" "},{"line":"108","token_name":"T_STRING","text":"intval"},{"line":"108","token_name":"(","text":"("},{"line":"108","token_name":"T_VARIABLE","text":"$row"},{"line":"108","token_name":"[","text":"["},{"line":"108","token_name":"T_CONSTANT_ENCAPSED_STRING","text":"'price'"},{"line":"108","token_name":"]","text":"]"},{"line":"108","token_name":")","text":")"},{"line":"108","token_name":";","text":";"},{"line":"108","token_name":"T_WHITESPACE","text":"\n        "},{"line":"109","token_name":"T_VARIABLE","text":"$this"},{"line":"109","token_name":"T_OBJECT_OPERATOR","text":"->"},{"line":"109","token_name":"T_STRING","text":"description"},{"line":"109","token_name":"T_WHITESPACE","text":" "},{"line":"109","token_name":"=","text":"="},{"line":"109","token_name":"T_WHITESPACE","text":" "},{"line":"109","token_name":"T_VARIABLE","text":"$row"},{"line":"109","token_name":"[","text":"["},{"line":"109","token_name":"T_CONSTANT_ENCAPSED_STRING","text":"'description'"},{"line":"109","token_name":"]","text":"]"},{"line":"109","token_name":";","text":";"},{"line":"109","token_name":"T_WHITESPACE","text":"\n        "},{"line":"110","token_name":"T_VARIABLE","text":"$this"},{"line":"110","token_name":"T_OBJECT_OPERATOR","text":"->"},{"line":"110","token_name":"T_STRING","text":"category_id"},{"line":"110","token_name":"T_WHITESPACE","text":" "},{"line":"110","token_name":"=","text":"="},{"line":"110","token_name":"T_WHITESPACE","text":" "},{"line":"110","token_name":"T_STRING","text":"intval"},{"line":"110","token_name":"(","text":"("},{"line":"110","token_name":"T_VARIABLE","text":"$row"},{"line":"110","token_name":"[","text":"["},{"line":"110","token_name":"T_CONSTANT_ENCAPSED_STRING","text":"'category_id'"},{"line":"110","token_name":"]","text":"]"},{"line":"110","token_name":")","text":")"},{"line":"110","token_name":";","text":";"},{"line":"110","token_name":"T_WHITESPACE","text":"\n        "},{"line":"111","token_name":"T_VARIABLE","text":"$this"},{"line":"111","token_name":"T_OBJECT_OPERATOR","text":"->"},{"line":"111","token_name":"T_STRING","text":"category_name"},{"line":"111","token_name":"T_WHITESPACE","text":" "},{"line":"111","token_name":"=","text":"="},{"line":"111","token_name":"T_WHITESPACE","text":" "},{"line":"111","token_name":"T_VARIABLE","text":"$row"},{"line":"111","token_name":"[","text":"["},{"line":"111","token_name":"T_CONSTANT_ENCAPSED_STRING","text":"'category_name'"},{"line":"111","token_name":"]","text":"]"},{"line":"111","token_name":";","text":";"},{"line":"111","token_name":"T_WHITESPACE","text":"\n    "},{"line":"112","token_name":"}","text":"}"},{"line":"112","token_name":"T_WHITESPACE","text":"\n"},{"line":"113","token_name":"}","text":"}"},{"line":"113","token_name":"T_WHITESPACE","text":"\n\n"},{"line":"115","token_name":"T_CLOSE_TAG","text":"?>"}]